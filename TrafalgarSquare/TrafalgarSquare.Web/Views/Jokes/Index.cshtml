@using TrafalgarSquare.Web.ViewModels;
@model List<JokesViewModel>
@{
    ViewBag.Title = "Jokes";
}

<h2>Jokes</h2>

@foreach (var joke in Model)
{
    <div class="panel panel-success">
        <div class="panel-heading">
            <h3 class="panel-title" id="panel-title">
                @joke.Title<a href="#panel-title" class="anchorjs-link"><span class="anchorjs-icon"></span></a>
            </h3>
        </div>
        <div class="panel-body">
            <div class="text-center">
                <h4>@joke.Text</h4>
                @if (!string.IsNullOrEmpty(joke.Resource.FileUrl))
                {
                    <span>Attached file: </span>
                    <a href="@joke.Resource.FileUrl">download</a>
                }
                @if (!string.IsNullOrEmpty(joke.Resource.PictureUrl))
                {
                    <img src="@joke.Resource.PictureUrl" alt="@joke.Title" style="max-width:100%" />
                }
                @if (!string.IsNullOrEmpty(joke.Resource.VideoUrl))
                {
                    <video controls>
                        <source src="@joke.Resource.VideoUrl" type="video/mp4">
                        Your browser does not support HTML5 video.
                    </video>

                }
            </div>
        </div>
        <div class="panel-footer">
            <div class="row">
                @if (!string.IsNullOrEmpty(joke.User.AvatarUrl)) {
                    <div class="col-md-2">
                        <img src="@joke.User.AvatarUrl" alt="@joke.User.Username"/>
                    </div>
                }
                <div class="col-md-3">
                    <div>Date: @joke.CreatedDateTime </div>
                    <div>User: @joke.User.Username</div>
                    <div>Likes: @joke.Likes</div>
                    <div>Comments: @joke.CommentsCount</div>
                    <div>@*Is reported: @joke.IsReported*@</div>
                </div>
                <div class="col-md-7 text-right">
                    <div class="btn btn-sm btn-info">
                        <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
                        Like
                    </div>
                    <div class="btn btn-sm btn-info">
                        Show comments
                    </div>
                    <div class="btn btn-sm btn-danger">
                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                        Report post
                    </div>
                </div>
            </div>
        </div>
    </div>
}
